<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduBoard - Lavagna Digitale Interattiva</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="icon-96x96.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <meta name="theme-color" content="#2563EB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    <!-- Header compatto -->
    <header>
        <div class="header-left">
            <div class="logo">
                <img src="icon-96x96.png" alt="EduBoard" class="logo-icon">
                <h1>EduBoard</h1>
            </div>
            <div class="project-info">
                <span id="current-project">Nuovo Progetto</span>
            </div>
        </div>
        <div class="header-right">
            <button id="fullscreen-btn" class="header-btn secondary" title="Schermo Intero">
                <span class="btn-icon">‚õ∂</span>
            </button>
            <button id="save-btn" class="header-btn primary">
                <span class="btn-icon">üíæ</span>
            </button>
            <button id="load-btn" class="header-btn secondary">
                <span class="btn-icon">üìÇ</span>
            </button>
            <button id="new-btn" class="header-btn secondary">
                <span class="btn-icon">‚ú®</span>
            </button>
        </div>
    </header>

    <!-- Toolbar compatta -->
    <div class="toolbar">
        <!-- Bottone principale strumenti -->
        <button id="tools-panel-btn" class="tool-btn primary" title="Strumenti">‚úèÔ∏è</button>
        
        <!-- Azioni rapide sempre visibili -->
        <button id="upload-btn" class="tool-btn" title="Carica File">üìé</button>
        <input type="file" id="file-input" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif" style="display: none;">
        <button id="clear-btn" class="tool-btn danger" title="Pulisci Tutto">üóëÔ∏è</button>
        <button id="undo-btn" class="tool-btn" title="Annulla">‚Ü∂</button>
        <button id="redo-btn" class="tool-btn" title="Ripeti">‚Ü∑</button>
    </div>

    <!-- Pannello Strumenti Laterale -->
    <div id="tools-panel" class="tools-panel">
        <div class="panel-header">
            <h3>Strumenti</h3>
            <button id="close-tools-panel" class="close-btn">‚úï</button>
        </div>
        
        <div class="panel-content">
            <!-- Sezione Strumenti -->
            <div class="panel-section">
                <h4>Strumento</h4>
                <div class="tool-options">
                    <div class="tool-option active" data-tool="pencil">
                        <div class="tool-icon">‚úèÔ∏è</div>
                        <div class="tool-info">
                            <span class="tool-name">Matita</span>
                            <div class="tool-example">
                                <svg width="80" height="20" viewBox="0 0 80 20">
                                    <path d="M5,10 Q20,8 35,12 T65,10" stroke="#666" stroke-width="2" fill="none" opacity="0.8"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tool-option" data-tool="pen">
                        <div class="tool-icon">üñäÔ∏è</div>
                        <div class="tool-info">
                            <span class="tool-name">Penna</span>
                            <div class="tool-example">
                                <svg width="80" height="20" viewBox="0 0 80 20">
                                    <path d="M5,10 Q20,8 35,12 T65,10" stroke="#000" stroke-width="2.5" fill="none"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tool-option" data-tool="marker">
                        <div class="tool-icon">üñçÔ∏è</div>
                        <div class="tool-info">
                            <span class="tool-name">Evidenziatore</span>
                            <div class="tool-example">
                                <svg width="80" height="20" viewBox="0 0 80 20">
                                    <path d="M5,10 Q20,8 35,12 T65,10" stroke="#ffeb3b" stroke-width="8" fill="none" opacity="0.4"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tool-option" data-tool="fountain">
                        <div class="tool-icon">üñãÔ∏è</div>
                        <div class="tool-info">
                            <span class="tool-name">Stilografica</span>
                            <div class="tool-example">
                                <svg width="80" height="20" viewBox="0 0 80 20">
                                    <path d="M5,10 Q20,6 35,14 T65,10" stroke="#1a237e" stroke-width="3" fill="none"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tool-option" data-tool="eraser">
                        <div class="tool-icon">üßΩ</div>
                        <div class="tool-info">
                            <span class="tool-name">Gomma</span>
                            <div class="tool-example">
                                <div style="width: 80px; height: 20px; background: #f5f5f5; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #999;">cancella</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sezione Dimensioni -->
            <div class="panel-section">
                <h4>Dimensioni</h4>
                <div class="size-options">
                    <div class="size-option" data-size="1"><div class="size-dot" style="width: 2px; height: 2px;"></div></div>
                    <div class="size-option" data-size="3"><div class="size-dot" style="width: 6px; height: 6px;"></div></div>
                    <div class="size-option active" data-size="5"><div class="size-dot" style="width: 10px; height: 10px;"></div></div>
                    <div class="size-option" data-size="8"><div class="size-dot" style="width: 16px; height: 16px;"></div></div>
                    <div class="size-option" data-size="12"><div class="size-dot" style="width: 24px; height: 24px;"></div></div>
                </div>
            </div>
            
            <!-- Sezione Colori -->
            <div class="panel-section">
                <h4>Colore</h4>
                <div class="color-grid">
                    <div class="color-swatch active" data-color="#000000" style="background: #000000"></div>
                    <div class="color-swatch" data-color="#2563EB" style="background: #2563EB"></div>
                    <div class="color-swatch" data-color="#DC2626" style="background: #DC2626"></div>
                    <div class="color-swatch" data-color="#16A34A" style="background: #16A34A"></div>
                    <div class="color-swatch" data-color="#CA8A04" style="background: #CA8A04"></div>
                    <div class="color-swatch" data-color="#9333EA" style="background: #9333EA"></div>
                    <div class="color-swatch" data-color="#C2410C" style="background: #C2410C"></div>
                    <div class="color-swatch" data-color="#0891B2" style="background: #0891B2"></div>
                    <div class="color-swatch" data-color="#BE185D" style="background: #BE185D"></div>
                    <div class="color-swatch" data-color="#65A30D" style="background: #65A30D"></div>
                    <button class="color-picker-btn" id="custom-color-btn" title="Altri colori">+</button>
                </div>
                <input type="color" id="color-picker" value="#000000" style="display: none;">
            </div>
            
            <!-- Sezione Sfondi -->
            <div class="panel-section">
                <h4>Sfondo</h4>
                <div class="background-options">
                    <div class="bg-option active" data-bg="blank">
                        <div class="bg-preview bg-blank"></div>
                        <span>Bianco</span>
                    </div>
                    <div class="bg-option" data-bg="lines">
                        <div class="bg-preview bg-lines"></div>
                        <span>Righe</span>
                    </div>
                    <div class="bg-option" data-bg="squares">
                        <div class="bg-preview bg-squares"></div>
                        <span>Quadretti</span>
                    </div>
                    <div class="bg-option" data-bg="music">
                        <div class="bg-preview bg-music"></div>
                        <span>Pentagramma</span>
                    </div>
                    <div class="bg-option" data-bg="dots">
                        <div class="bg-preview bg-dots"></div>
                        <span>Puntini</span>
                    </div>
                </div>
            </div>
            
            <!-- Sezione Strumenti Geometrici -->
            <div class="panel-section">
                <h4>Geometria</h4>
                <div class="geometry-tools">
                    <button id="ruler-tool" class="geometry-btn">
                        <span class="tool-icon">üìè</span>
                        <span>Righello</span>
                    </button>
                    <button id="protractor-tool" class="geometry-btn">
                        <span class="tool-icon">üìê</span>
                        <span>Goniometro</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Area principale -->
    <main>
        <div class="canvas-container">
            <canvas id="whiteboard" width="1920" height="1080"></canvas>
            
            <!-- Strumenti geometrici -->
            <div id="ruler" class="geometric-tool" style="display: none;">
                <div class="ruler-body">
                    <div class="ruler-marks"></div>
                </div>
            </div>

            <div id="protractor" class="geometric-tool" style="display: none;">
                <div class="protractor-body">
                    <div class="protractor-marks"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">
                <span class="sidebar-icon">üìÅ</span>
                <h3>I Miei Progetti</h3>
            </div>
            <button id="close-sidebar" class="close-btn">‚úï</button>
        </div>
        <div class="sidebar-content">
            <div class="folder-structure">
                <div class="folder" data-folder="matematica">
                    <div class="folder-header">
                        <span class="folder-icon">üìÅ</span>
                        <span class="folder-name">Matematica</span>
                        <button class="add-subfolder">+</button>
                    </div>
                    <div class="folder-content"></div>
                </div>
                <div class="folder" data-folder="italiano">
                    <div class="folder-header">
                        <span class="folder-icon">üìÅ</span>
                        <span class="folder-name">Italiano</span>
                        <button class="add-subfolder">+</button>
                    </div>
                    <div class="folder-content"></div>
                </div>
                <div class="folder" data-folder="scienze">
                    <div class="folder-header">
                        <span class="folder-icon">üìÅ</span>
                        <span class="folder-name">Scienze</span>
                        <button class="add-subfolder">+</button>
                    </div>
                    <div class="folder-content"></div>
                </div>
            </div>
            <button id="add-folder" class="add-folder-btn">+ Nuova Cartella</button>
        </div>
    </aside>

    <!-- Modal salvataggio -->
    <div id="save-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-icon">üíæ</span>
                <h3>Salva Progetto</h3>
            </div>
            <div class="form-group">
                <label for="project-name">Nome del progetto:</label>
                <input type="text" id="project-name" placeholder="Es: Lezione di matematica" class="modern-input">
            </div>
            <div class="form-group">
                <label for="project-folder">Cartella:</label>
                <select id="project-folder" class="modern-select">
                    <option value="matematica">Matematica</option>
                    <option value="italiano">Italiano</option>
                    <option value="scienze">Scienze</option>
                </select>
            </div>
            <div class="modal-actions">
                <button id="cancel-save" class="btn-secondary">Annulla</button>
                <button id="confirm-save" class="btn-primary">Salva Progetto</button>
            </div>
        </div>
    </div>

    <!-- Drop overlay -->
    <div id="drop-overlay" class="drop-overlay" style="display: none;">
        <div class="drop-message">
            <div class="drop-icon">üìé</div>
            <p>Rilascia qui i tuoi file</p>
            <small>PDF, Word, Immagini supportati</small>
        </div>
    </div>

    <!-- Calibrazione -->
    <div id="calibration-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-icon">üéØ</span>
                <h3>Calibrazione Matita</h3>
            </div>
            <div class="calibration-area">
                <p>Tocca i punti rossi nell'ordine indicato per calibrare la matita:</p>
                <div class="calibration-points">
                    <div class="calibration-point" data-point="1"></div>
                    <div class="calibration-point" data-point="2"></div>
                    <div class="calibration-point" data-point="3"></div>
                    <div class="calibration-point" data-point="4"></div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="skip-calibration" class="btn-secondary">Salta</button>
                <button id="start-calibration" class="btn-primary">Inizia Calibrazione</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>