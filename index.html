<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduBoard - Lavagna Digitale Interattiva</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="icon-96x96.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <meta name="theme-color" content="#2563EB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    <!-- Header elegante -->
    <header>
        <div class="header-left">
            <div class="logo">
                <img src="icon-96x96.png" alt="EduBoard" class="logo-icon">
                <h1>EduBoard</h1>
            </div>
            <div class="project-info">
                <span id="current-project">Nuovo Progetto</span>
            </div>
        </div>
        <div class="header-right">
            <button id="fullscreen-btn" class="header-btn" title="Schermo Intero">‚õ∂</button>
            <button id="save-btn" class="header-btn primary" title="Salva">üíæ</button>
            <button id="load-btn" class="header-btn" title="Carica">üìÇ</button>
            <button id="new-btn" class="header-btn" title="Nuovo">‚ú®</button>
        </div>
    </header>

    <!-- Menu flottante trascinabile -->
    <div id="floating-toolbar" class="floating-toolbar">
        <div class="toolbar-handle" id="toolbar-handle">
            <div class="handle-grip"></div>
        </div>
        
        <div class="toolbar-content">
            <!-- Strumenti -->
            <div class="tool-section">
                <button id="tools-toggle" class="main-tool-btn active" data-tool="pencil">
                    <div class="tool-icon">‚úèÔ∏è</div>
                    <div class="tool-label">Matita</div>
                </button>
                
                <div id="tools-panel" class="tool-panel">
                    <div class="panel-header">Strumenti</div>
                    <div class="tool-grid">
                        <button class="tool-btn active" data-tool="pencil" title="Matita">
                            <span class="tool-icon">‚úèÔ∏è</span>
                            <span class="tool-name">Matita</span>
                        </button>
                        <button class="tool-btn" data-tool="pen" title="Biro">
                            <span class="tool-icon">üñäÔ∏è</span>
                            <span class="tool-name">Biro</span>
                        </button>
                        <button class="tool-btn" data-tool="marker" title="Evidenziatore">
                            <span class="tool-icon">üñçÔ∏è</span>
                            <span class="tool-name">Evidenziatore</span>
                        </button>
                        <button class="tool-btn" data-tool="fountain" title="Stilografica">
                            <span class="tool-icon">üñãÔ∏è</span>
                            <span class="tool-name">Stilografica</span>
                        </button>
                        <button class="tool-btn" data-tool="eraser" title="Gomma">
                            <span class="tool-icon">üßΩ</span>
                            <span class="tool-name">Gomma</span>
                        </button>
                        <button class="tool-btn" data-tool="text" title="Testo">
                            <span class="tool-icon">üìù</span>
                            <span class="tool-name">Testo</span>
                        </button>
                    </div>
                    
                    <div class="panel-section">
                        <div class="section-title">Dimensione</div>
                        <div class="size-selector">
                            <button class="size-btn" data-size="2"><div class="size-dot size-1"></div></button>
                            <button class="size-btn" data-size="4"><div class="size-dot size-2"></div></button>
                            <button class="size-btn active" data-size="6"><div class="size-dot size-3"></div></button>
                            <button class="size-btn" data-size="10"><div class="size-dot size-4"></div></button>
                            <button class="size-btn" data-size="15"><div class="size-dot size-5"></div></button>
                        </div>
                    </div>
                    
                    <div class="panel-section">
                        <div class="section-title">Colore</div>
                        <div class="color-palette">
                            <button class="color-btn active" data-color="#000000" style="background: #000000"></button>
                            <button class="color-btn" data-color="#2563EB" style="background: #2563EB"></button>
                            <button class="color-btn" data-color="#DC2626" style="background: #DC2626"></button>
                            <button class="color-btn" data-color="#16A34A" style="background: #16A34A"></button>
                            <button class="color-btn" data-color="#FFEB3B" style="background: #FFEB3B"></button>
                            <button class="color-btn" data-color="#FF9800" style="background: #FF9800"></button>
                            <button class="color-btn" data-color="#9333EA" style="background: #9333EA"></button>
                            <button class="color-btn" data-color="#E91E63" style="background: #E91E63"></button>
                            <button class="color-btn" data-color="#00BCD4" style="background: #00BCD4"></button>
                            <button class="color-btn" data-color="#795548" style="background: #795548"></button>
                            <button id="custom-color" class="color-btn custom">+</button>
                        </div>
                        <input type="color" id="color-picker" style="display: none;">
                    </div>
                </div>
            </div>

            <!-- Sfondi -->
            <div class="tool-section">
                <button id="backgrounds-toggle" class="main-tool-btn">
                    <div class="tool-icon">üìÑ</div>
                    <div class="tool-label">Sfondi</div>
                </button>
                
                <div id="backgrounds-panel" class="tool-panel">
                    <div class="panel-header">Sfondi</div>
                    <div class="bg-grid">
                        <button class="bg-btn active" data-bg="blank">
                            <div class="bg-preview bg-blank"></div>
                            <span>Bianco</span>
                        </button>
                        <button class="bg-btn" data-bg="lines">
                            <div class="bg-preview bg-lines"></div>
                            <span>Righe</span>
                        </button>
                        <button class="bg-btn" data-bg="squares">
                            <div class="bg-preview bg-squares"></div>
                            <span>Quadretti</span>
                        </button>
                        <button class="bg-btn" data-bg="music">
                            <div class="bg-preview bg-music"></div>
                            <span>Pentagramma</span>
                        </button>
                        <button class="bg-btn" data-bg="dots">
                            <div class="bg-preview bg-dots"></div>
                            <span>Puntini</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Geometria -->
            <div class="tool-section">
                <button id="geometry-toggle" class="main-tool-btn">
                    <div class="tool-icon">üìè</div>
                    <div class="tool-label">Geometria</div>
                </button>
                
                <div id="geometry-panel" class="tool-panel">
                    <div class="panel-header">Strumenti Geometrici</div>
                    <div class="geometry-tools">
                        <button id="ruler-btn" class="geometry-btn">
                            <span class="tool-icon">üìè</span>
                            <span>Righello</span>
                        </button>
                        <button id="protractor-btn" class="geometry-btn">
                            <span class="tool-icon">üìê</span>
                            <span>Goniometro</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Azioni rapide -->
            <div class="quick-actions">
                <button id="upload-btn" class="action-btn" title="Carica File">üìé</button>
                <button id="clear-btn" class="action-btn danger" title="Pulisci">üóëÔ∏è</button>
                <button id="undo-btn" class="action-btn" title="Annulla">‚Ü∂</button>
                <button id="redo-btn" class="action-btn" title="Ripeti">‚Ü∑</button>
            </div>
        </div>
    </div>

    <!-- Area canvas -->
    <main class="canvas-area">
        <canvas id="whiteboard" width="1920" height="1080"></canvas>
        
        <!-- Strumenti geometrici -->
        <div id="ruler" class="geometric-tool" style="display: none;">
            <div class="ruler-body">
                <div class="ruler-marks"></div>
            </div>
        </div>

        <div id="protractor" class="geometric-tool" style="display: none;">
            <div class="protractor-body"></div>
        </div>
    </main>

    <!-- Sidebar progetti -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>üìÅ I Miei Progetti</h3>
            <button id="close-sidebar" class="close-btn">‚úï</button>
        </div>
        <div class="sidebar-content">
            <div class="folder-structure">
                <div class="folder" data-folder="matematica">
                    <div class="folder-header">
                        <span class="folder-icon">üìÅ</span>
                        <span class="folder-name">Matematica</span>
                    </div>
                    <div class="folder-content"></div>
                </div>
                <div class="folder" data-folder="italiano">
                    <div class="folder-header">
                        <span class="folder-icon">üìÅ</span>
                        <span class="folder-name">Italiano</span>
                    </div>
                    <div class="folder-content"></div>
                </div>
                <div class="folder" data-folder="scienze">
                    <div class="folder-header">
                        <span class="folder-icon">üìÅ</span>
                        <span class="folder-name">Scienze</span>
                    </div>
                    <div class="folder-content"></div>
                </div>
            </div>
        </div>
    </aside>

    <!-- Modal salvataggio -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üíæ Salva Progetto</h3>
            </div>
            <div class="form-group">
                <label>Nome del progetto:</label>
                <input type="text" id="project-name" placeholder="Es: Lezione di matematica">
            </div>
            <div class="form-group">
                <label>Cartella:</label>
                <select id="project-folder">
                    <option value="matematica">Matematica</option>
                    <option value="italiano">Italiano</option>
                    <option value="scienze">Scienze</option>
                </select>
            </div>
            <div class="modal-actions">
                <button id="cancel-save" class="btn-secondary">Annulla</button>
                <button id="confirm-save" class="btn-primary">Salva</button>
            </div>
        </div>
    </div>

    <!-- File input nascosto -->
    <input type="file" id="file-input" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif" style="display: none;">

    <script src="app.js"></script>
</body>
</html>