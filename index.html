<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduBoard - Lavagna Digitale Interattiva</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563EB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="EduBoard">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <meta name="description" content="Lavagna digitale professionale per la scuola con strumenti avanzati, sfondi educativi e gestione progetti intelligente">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-left">
            <div class="logo">
                <img src="https://images.pexels.com/photos/207691/pexels-photo-207691.jpeg?auto=compress&cs=tinysrgb&w=64&h=64&fit=crop" alt="EduBoard" class="logo-icon">
                <h1>EduBoard</h1>
            </div>
            <div class="project-info" id="project-info">
                Nuova Lavagna
            </div>
        </div>
        <div class="header-right">
            <button class="header-btn" id="projects-btn">üìÅ Progetti</button>
            <button class="header-btn primary" id="save-btn">üíæ Salva</button>
        </div>
    </header>

    <!-- Area Canvas -->
    <div class="canvas-area">
        <canvas id="whiteboard"></canvas>
        
        <!-- Strumenti geometrici -->
        <div id="ruler" class="geometric-tool advanced-ruler" style="display: none;">
            <div class="ruler-marks"></div>
        </div>

        <div id="protractor" class="geometric-tool" style="display: none;">
            <div class="protractor-marks"></div>
        </div>
    </div>

    <!-- Barra strumenti flottante -->
    <div id="floating-toolbar" class="floating-toolbar">
        <!-- Strumenti di disegno -->
        <div class="toolbar-item" data-tooltip="Matita">
            <button class="toolbar-btn tool-btn active" data-tool="pencil">
                <div class="tool-icon pencil-icon">
                    <div class="pencil-body">
                        <div class="pencil-tip"></div>
                        <div class="pencil-band"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Biro">
            <button class="toolbar-btn tool-btn" data-tool="pen">
                <div class="tool-icon pen-icon">
                    <div class="pen-body">
                        <div class="pen-tip"></div>
                        <div class="pen-clip"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Evidenziatore">
            <button class="toolbar-btn tool-btn" data-tool="marker">
                <div class="tool-icon marker-icon">
                    <div class="marker-body">
                        <div class="marker-tip"></div>
                        <div class="marker-cap"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Stilografica">
            <button class="toolbar-btn tool-btn" data-tool="fountain">
                <div class="tool-icon fountain-icon">
                    <div class="fountain-body">
                        <div class="fountain-nib"></div>
                        <div class="fountain-cap"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Gomma">
            <button class="toolbar-btn tool-btn" data-tool="eraser">
                <div class="tool-icon">
                    <div class="eraser-body">
                        <div class="eraser-band"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-item" data-tooltip="Testo">
            <button class="toolbar-btn tool-btn" data-tool="text">
                <div class="tool-icon">
                    <div class="text-lines">
                        <div class="text-line"></div>
                        <div class="text-line"></div>
                        <div class="text-line"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Mano">
            <button class="toolbar-btn tool-btn" data-tool="hand">
                <div class="tool-icon hand-icon">
                    <div class="hand-palm">
                        <div class="hand-fingers">
                            <div class="finger"></div>
                            <div class="finger"></div>
                            <div class="finger"></div>
                            <div class="finger"></div>
                        </div>
                        <div class="hand-thumb"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Lazo">
            <button class="toolbar-btn tool-btn" data-tool="lasso">
                <div class="tool-icon">
                    <div class="lasso-rope">
                        <div class="lasso-handle"></div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-item" data-tooltip="Carica File">
            <button class="toolbar-btn tool-btn" data-tool="upload">
                <div class="tool-icon">
                    <div class="upload-folder">
                        <div class="upload-arrow">+</div>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Cancella Tutto">
            <button class="toolbar-btn tool-btn danger" data-tool="clear">
                <div class="tool-icon">
                    <div class="clear-circle">
                        <span>√ó</span>
                    </div>
                </div>
            </button>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-item" data-tooltip="Annulla">
            <button class="toolbar-btn tool-btn" id="undo-btn">
                <div class="tool-icon">
                    <div class="undo-arrow">‚Ü∂</div>
                </div>
            </button>
        </div>

        <div class="toolbar-item" data-tooltip="Ripeti">
            <button class="toolbar-btn tool-btn" id="redo-btn">
                <div class="tool-icon">
                    <div class="redo-arrow">‚Ü∑</div>
                </div>
            </button>
        </div>

        <!-- Pannelli espandibili -->
        <div id="pen-panel" class="expand-panel">
            <div class="panel-content">
                <div class="tool-section">
                    <h4>Dimensioni</h4>
                    <div class="size-selector">
                        <button class="size-btn" data-size="2">
                            <div class="size-dot size-1"></div>
                        </button>
                        <button class="size-btn active" data-size="4">
                            <div class="size-dot size-2"></div>
                        </button>
                        <button class="size-btn" data-size="8">
                            <div class="size-dot size-3"></div>
                        </button>
                        <button class="size-btn" data-size="12">
                            <div class="size-dot size-4"></div>
                        </button>
                        <button class="size-btn" data-size="20">
                            <div class="size-dot size-5"></div>
                        </button>
                    </div>
                </div>

                <div class="tool-section">
                    <h4>Colori</h4>
                    <div class="color-palette">
                        <button class="color-btn active" data-color="#000000" style="background: #000000;"></button>
                        <button class="color-btn" data-color="#1e40af" style="background: #1e40af;"></button>
                        <button class="color-btn" data-color="#dc2626" style="background: #dc2626;"></button>
                        <button class="color-btn" data-color="#d97706" style="background: #d97706;"></button>
                        <button class="color-btn" data-color="#059669" style="background: #059669;"></button>
                        <button class="color-btn" data-color="#0284c7" style="background: #0284c7;"></button>
                        <button class="color-btn" data-color="#7c3aed" style="background: #7c3aed;"></button>
                        <button class="color-btn" data-color="#65a30d" style="background: #65a30d;"></button>
                        <button class="color-btn custom" id="custom-color">+</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="background-panel" class="expand-panel">
            <div class="panel-content">
                <div class="tool-section">
                    <h4>Sfondi</h4>
                    <div class="bg-grid">
                        <button class="bg-btn active" data-bg="blank">
                            <div class="bg-preview bg-blank"></div>
                            <span>Bianco</span>
                        </button>
                        <button class="bg-btn" data-bg="lines">
                            <div class="bg-preview bg-lines"></div>
                            <span>Righe</span>
                        </button>
                        <button class="bg-btn" data-bg="squares">
                            <div class="bg-preview bg-squares"></div>
                            <span>Quadretti</span>
                        </button>
                        <button class="bg-btn" data-bg="music">
                            <div class="bg-preview bg-music"></div>
                            <span>Pentagramma</span>
                        </button>
                        <button class="bg-btn" data-bg="dots">
                            <div class="bg-preview bg-dots"></div>
                            <span>Puntini</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="shapes-panel" class="expand-panel">
            <div class="panel-content">
                <div class="tool-section">
                    <h4>Forme</h4>
                    <div class="shapes-grid">
                        <button class="shape-btn" data-shape="line">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            <span>Linea</span>
                        </button>
                        <button class="shape-btn" data-shape="rectangle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            </svg>
                            <span>Rettangolo</span>
                        </button>
                        <button class="shape-btn" data-shape="circle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                            </svg>
                            <span>Cerchio</span>
                        </button>
                        <button class="shape-btn" data-shape="triangle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12,2 22,20 2,20"></polygon>
                            </svg>
                            <span>Triangolo</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="geometry-panel" class="expand-panel">
            <div class="panel-content">
                <div class="tool-section">
                    <h4>Strumenti Geometrici</h4>
                    <div class="geometry-tools">
                        <button class="geometry-btn" id="ruler-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                            </svg>
                            <span>Righello</span>
                        </button>
                        <button class="geometry-btn" id="protractor-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2a10 10 0 0 1 10 10H2a10 10 0 0 1 10-10z"></path>
                                <path d="M12 12v-8"></path>
                            </svg>
                            <span>Goniometro</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar progetti -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>I Miei Progetti</h3>
            <button class="close-btn" id="sidebar-close">√ó</button>
        </div>
        <div class="sidebar-content">
            <div class="folder">
                <div class="folder-header" data-folder="matematica">
                    <span class="folder-icon">üìê</span>
                    <span class="folder-name">Matematica</span>
                    <span class="folder-toggle">‚ñº</span>
                </div>
                <div class="folder-content">
                    <div class="project-item" data-project="geometria-1">Geometria - Triangoli</div>
                    <div class="project-item" data-project="algebra-1">Algebra - Equazioni</div>
                    <div class="project-item" data-project="calcolo-1">Calcolo - Derivate</div>
                </div>
            </div>

            <div class="folder">
                <div class="folder-header" data-folder="italiano">
                    <span class="folder-icon">üìö</span>
                    <span class="folder-name">Italiano</span>
                    <span class="folder-toggle">‚ñº</span>
                </div>
                <div class="folder-content">
                    <div class="project-item" data-project="letteratura-1">Letteratura - Dante</div>
                    <div class="project-item" data-project="grammatica-1">Grammatica - Analisi</div>
                </div>
            </div>

            <div class="folder">
                <div class="folder-header" data-folder="scienze">
                    <span class="folder-icon">üî¨</span>
                    <span class="folder-name">Scienze</span>
                    <span class="folder-toggle">‚ñº</span>
                </div>
                <div class="folder-content">
                    <div class="project-item" data-project="chimica-1">Chimica - Molecole</div>
                    <div class="project-item" data-project="fisica-1">Fisica - Forze</div>
                    <div class="project-item" data-project="biologia-1">Biologia - Cellule</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal salvataggio -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Salva Progetto</h3>
            </div>
            <form id="save-form">
                <div class="form-group">
                    <label for="project-name">Nome Progetto</label>
                    <input type="text" id="project-name" placeholder="Inserisci nome progetto" required>
                </div>
                <div class="form-group">
                    <label for="project-folder">Cartella</label>
                    <select id="project-folder" required>
                        <option value="matematica">üìê Matematica</option>
                        <option value="italiano">üìö Italiano</option>
                        <option value="scienze">üî¨ Scienze</option>
                        <option value="generale">üìÅ Generale</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-save">Annulla</button>
                    <button type="submit" class="btn-primary">Salva</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Banner aggiornamento PWA -->
    <div id="update-banner" class="update-banner">
        <div class="update-content">
            <div class="update-icon">üöÄ</div>
            <div class="update-text">
                <strong>Aggiornamento Disponibile!</strong>
                <p>Una nuova versione di EduBoard √® pronta per essere installata.</p>
            </div>
            <button class="update-btn" id="update-btn">Aggiorna</button>
            <button class="dismiss-btn" id="dismiss-update">√ó</button>
        </div>
    </div>

    <!-- Input nascosto per colore personalizzato -->
    <input type="color" id="color-picker" style="display: none;">

    <!-- Input nascosto per upload file -->
    <input type="file" id="file-input" accept="image/*,.pdf,.doc,.docx" multiple style="display: none;">

    <script type="module" src="app.js"></script>
</body>
</html>